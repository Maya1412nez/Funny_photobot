# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'Project.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.

import sys
from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtWidgets import QApplication, QWidget, QLabel, QLineEdit, QPushButton
from PyQt5.QtGui import QIcon, QPixmap, QPainter
import sqlite3
from PIL import Image

# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'Project.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.

import sys
from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtWidgets import QApplication, QWidget, QLabel, QLineEdit, QPushButton
from PyQt5.QtGui import QIcon, QPixmap, QPainter
from PyQt5.QtGui import QIcon
from PIL import Image


class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        self.my_counter = Management()
        self.face_im_name_num = 0

        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(960, 460)
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.comboBox = QtWidgets.QComboBox(self.centralwidget)
        self.comboBox.setGeometry(QtCore.QRect(60, 50, 240, 50))
        self.comboBox.setObjectName("comboBox")

        # first face btn
        self.pushButton = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton.setGeometry(QtCore.QRect(20, 50, 30, 50))
        self.pushButton.setObjectName("pushButton")
        self.pushButton.clicked.connect(self.counting_face_plus)
        self.pushButton.clicked.connect(self.im)

        # second face btn
        self.pushButton_2 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_2.setGeometry(QtCore.QRect(310, 50, 30, 50))
        self.pushButton_2.setObjectName("pushButton_2")
        self.pushButton_2.clicked.connect(self.counting_face_minus)

        # first hair btn
        self.pushButton_3 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_3.setGeometry(QtCore.QRect(20, 130, 30, 50))
        self.pushButton_3.setObjectName("pushButton_3")
        self.hair_im_name_num = 0
        self.pushButton_3.clicked.connect(self.counting_hair_plus)

        self.comboBox_2 = QtWidgets.QComboBox(self.centralwidget)
        self.comboBox_2.setGeometry(QtCore.QRect(60, 130, 240, 50))
        self.comboBox_2.setObjectName("comboBox_2")

        # second hair btn
        self.pushButton_4 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_4.setGeometry(QtCore.QRect(310, 130, 30, 50))
        self.pushButton_4.setObjectName("pushButton_4")
        self.pushButton_4.clicked.connect(self.counting_hair_minus)

        # second eyes btn
        self.pushButton_5 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_5.setGeometry(QtCore.QRect(310, 210, 30, 50))
        self.pushButton_5.setObjectName("pushButton_5")
        self.eyes_im_name_num = 0
        self.pushButton_5.clicked.connect(self.counting_eyes_minus)

        # first eyes btn
        self.pushButton_6 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_6.setGeometry(QtCore.QRect(20, 210, 30, 50))
        self.pushButton_6.setObjectName("pushButton_6")
        self.pushButton_6.clicked.connect(self.counting_eyes_plus)

        self.comboBox_3 = QtWidgets.QComboBox(self.centralwidget)
        self.comboBox_3.setGeometry(QtCore.QRect(60, 210, 240, 50))
        self.comboBox_3.setObjectName("comboBox_3")
        self.label = QtWidgets.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(60, 20, 240, 25))
        self.label.setObjectName("label")
        self.label_2 = QtWidgets.QLabel(self.centralwidget)
        self.label_2.setGeometry(QtCore.QRect(60, 100, 240, 25))
        self.label_2.setObjectName("label_2")
        self.label_3 = QtWidgets.QLabel(self.centralwidget)
        self.label_3.setGeometry(QtCore.QRect(60, 180, 240, 25))
        self.label_3.setObjectName("label_3")

        # SAVE btn
        self.pushButton_13 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_13.setGeometry(QtCore.QRect(840, 370, 100, 30))
        self.pushButton_13.setObjectName("pushButton_13")
        self.pushButton_13.clicked.connect(self.saving)
        # добавить метод для сохранения изображения

        # first ears btn
        self.pushButton_14 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_14.setGeometry(QtCore.QRect(20, 290, 30, 50))
        self.pushButton_14.setObjectName("pushButton_14")
        self.ears_im_name_num = 0
        self.pushButton_14.clicked.connect(self.counting_ears_plus)

        # second ears btn
        self.pushButton_15 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_15.setGeometry(QtCore.QRect(310, 290, 30, 50))
        self.pushButton_15.setObjectName("pushButton_15")
        self.pushButton_15.clicked.connect(self.counting_ears_minus)

        self.comboBox_7 = QtWidgets.QComboBox(self.centralwidget)
        self.comboBox_7.setGeometry(QtCore.QRect(60, 290, 240, 50))
        self.comboBox_7.setObjectName("comboBox_7")
        self.label_7 = QtWidgets.QLabel(self.centralwidget)
        self.label_7.setGeometry(QtCore.QRect(60, 260, 240, 25))
        self.label_7.setObjectName("label_7")

        # first eyebrows btn
        self.pushButton_7 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_7.setGeometry(QtCore.QRect(620, 50, 30, 50))
        self.pushButton_7.setObjectName("pushButton_7")
        self.eyebrows_im_name_num = 0
        self.pushButton_7.clicked.connect(self.counting_eyebrows_plus)

        # first nose btn
        self.pushButton_8 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_8.setGeometry(QtCore.QRect(620, 210, 30, 50))
        self.pushButton_8.setObjectName("pushButton_8")
        self.nose_im_name_num = 0
        self.pushButton_8.clicked.connect(self.counting_nose_plus)

        self.comboBox_4 = QtWidgets.QComboBox(self.centralwidget)
        self.comboBox_4.setGeometry(QtCore.QRect(660, 50, 240, 50))
        self.comboBox_4.setObjectName("comboBox_4")
        self.comboBox_8 = QtWidgets.QComboBox(self.centralwidget)
        self.comboBox_8.setGeometry(QtCore.QRect(660, 290, 240, 50))
        self.comboBox_8.setObjectName("comboBox_8")

        # first attribute btn
        self.pushButton_16 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_16.setGeometry(QtCore.QRect(620, 290, 30, 50))
        self.pushButton_16.setObjectName("pushButton_16")
        self.attribute_im_name_num = 0
        self.pushButton_16.clicked.connect(self.counting_attribute_plus)

        # second mouth btn
        self.pushButton_9 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_9.setGeometry(QtCore.QRect(910, 130, 30, 50))
        self.pushButton_9.setObjectName("pushButton_9")
        self.mouth_im_name_num = 0
        self.pushButton_9.clicked.connect(self.counting_mouth_minus)

        # second nose btn
        self.pushButton_10 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_10.setGeometry(QtCore.QRect(910, 210, 30, 50))
        self.pushButton_10.setObjectName("pushButton_10")
        self.pushButton_10.clicked.connect(self.counting_nose_minus)

        self.label_4 = QtWidgets.QLabel(self.centralwidget)
        self.label_4.setGeometry(QtCore.QRect(660, 20, 240, 25))
        self.label_4.setObjectName("label_4")
        self.label_5 = QtWidgets.QLabel(self.centralwidget)
        self.label_5.setGeometry(QtCore.QRect(660, 100, 240, 25))
        self.label_5.setObjectName("label_5")

        # second attribute btn
        self.pushButton_17 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_17.setGeometry(QtCore.QRect(910, 290, 30, 50))
        self.pushButton_17.setObjectName("pushButton_17")
        self.pushButton_17.clicked.connect(self.counting_attribute_minus)

        # first mouth btn
        self.pushButton_11 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_11.setGeometry(QtCore.QRect(620, 130, 30, 50))
        self.pushButton_11.setObjectName("pushButton_11")
        self.pushButton_11.clicked.connect(self.counting_mouth_plus)

        self.comboBox_5 = QtWidgets.QComboBox(self.centralwidget)
        self.comboBox_5.setGeometry(QtCore.QRect(660, 210, 240, 50))
        self.comboBox_5.setObjectName("comboBox_5")
        self.comboBox_6 = QtWidgets.QComboBox(self.centralwidget)
        self.comboBox_6.setGeometry(QtCore.QRect(660, 130, 240, 50))
        self.comboBox_6.setObjectName("comboBox_6")
        self.label_6 = QtWidgets.QLabel(self.centralwidget)
        self.label_6.setGeometry(QtCore.QRect(660, 180, 240, 25))
        self.label_6.setObjectName("label_6")
        self.label_8 = QtWidgets.QLabel(self.centralwidget)
        self.label_8.setGeometry(QtCore.QRect(660, 260, 240, 25))
        self.label_8.setObjectName("label_8")

        # second eyebrows btn
        self.pushButton_12 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_12.setGeometry(QtCore.QRect(910, 50, 30, 50))
        self.pushButton_12.setObjectName("pushButton_12")
        self.pushButton_12.clicked.connect(self.counting_eyebrows_minus)

        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtWidgets.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 960, 21))
        self.menubar.setObjectName("menubar")
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtWidgets.QStatusBar(MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)

        # face
        self.mainlabel_face = QtWidgets.QLabel(self.centralwidget)
        self.mainlabel_face.setGeometry(QtCore.QRect(360, 20, 240, 320))
        self.mainlabel_face.setObjectName("Main_Label")
        # вызов метода, отвечающей за инициализацию имени изображения
        # для этого - отдельный класс
        # переменная face_im_name создается в классе Management
        self.face_im_name = 'sface1'
        pixmap = QPixmap(f'imgs\{self.face_im_name}')
        self.mainlabel_face.setPixmap(pixmap)

        # eyes
        self.mainlabel_eyes = QtWidgets.QLabel(self.centralwidget)
        self.mainlabel_eyes.setGeometry(QtCore.QRect(360, 20, 240, 320))
        self.mainlabel_eyes.setObjectName("Main_Label")
        # вызов метода, отвечающей за инициализацию имени изображения
        # для этого - отдельный класс
        self.eyes_im_name = "eyes3.png"
        pixmap = QPixmap(f'imgs\{self.eyes_im_name}')
        self.mainlabel_eyes.setPixmap(pixmap)

        # ears
        self.mainlabel_ears = QtWidgets.QLabel(self.centralwidget)
        self.mainlabel_ears.setGeometry(QtCore.QRect(360, 20, 240, 320))
        self.mainlabel_ears.setObjectName("Main_Label")
        # вызов метода, отвечающей за инициализацию имени изображения
        # для этого - отдельный класс
        self.ears_im_name = "ears3.png"
        pixmap = QPixmap(f'imgs\{self.ears_im_name}')
        self.mainlabel_ears.setPixmap(pixmap)

        # eyebrows
        self.mainlabel_eyebrows = QtWidgets.QLabel(self.centralwidget)
        self.mainlabel_eyebrows.setGeometry(QtCore.QRect(360, 20, 240, 320))
        self.mainlabel_eyebrows.setObjectName("Main_Label")
        # вызов метода, отвечающей за инициализацию имени изображения
        # для этого - отдельный класс
        self.eyebrows_im_name = "eyebrows3.png"
        pixmap = QPixmap(f'imgs\{self.eyebrows_im_name}')
        self.mainlabel_eyebrows.setPixmap(pixmap)

        # mouth
        self.mainlabel_mouth = QtWidgets.QLabel(self.centralwidget)
        self.mainlabel_mouth.setGeometry(QtCore.QRect(360, 20, 240, 320))
        self.mainlabel_mouth.setObjectName("Main_Label")
        # вызов метода, отвечающей за инициализацию имени изображения
        # для этого - отдельный класс
        self.mouth_im_name = "mouth1.png"
        pixmap = QPixmap(f'imgs\{self.mouth_im_name}')
        self.mainlabel_mouth.setPixmap(pixmap)

        # nose
        self.mainlabel_nose = QtWidgets.QLabel(self.centralwidget)
        self.mainlabel_nose.setGeometry(QtCore.QRect(360, 20, 240, 320))
        self.mainlabel_nose.setObjectName("Main_Label")
        # вызов метода, отвечающей за инициализацию имени изображения
        # для этого - отдельный класс
        self.nose_im_name = "snose1.png"
        pixmap = QPixmap(f'imgs\{self.nose_im_name}')
        self.mainlabel_nose.setPixmap(pixmap)

        # hair
        self.mainlabel_hair = QtWidgets.QLabel(self.centralwidget)
        self.mainlabel_hair.setGeometry(QtCore.QRect(360, 20, 240, 320))
        self.mainlabel_hair.setObjectName("Main_Label")
        # вызов метода, отвечающего за инициализацию имени изображения
        # для этого - отдельный класс
        self.hair_im_name = 'hair2.png'
        pixmap = QPixmap(f'imgs\{self.hair_im_name}')
        self.mainlabel_hair.setPixmap(pixmap)

        # attributes
        self.mainlabel_attributes = QtWidgets.QLabel(self.centralwidget)
        self.mainlabel_attributes.setGeometry(QtCore.QRect(360, 20, 240, 320))
        self.mainlabel_attributes.setObjectName("Main_Label")
        # вызов метода, отвечающей за инициализацию имени изображения
        # для этого - отдельный класс
        self.attribute_im_name = "attributes3.png"
        pixmap = QPixmap(f'imgs\{self.attribute_im_name}')
        self.mainlabel_attributes.setPixmap(pixmap)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "Мультяшный фоторобот"))

        self.setWindowIcon(QIcon('imgs\shoot.png'))  # AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
        self.pushButton.setText(_translate("MainWindow", "<"))
        self.pushButton_2.setText(_translate("MainWindow", ">"))
        self.pushButton_3.setText(_translate("MainWindow", "<"))
        self.pushButton_4.setText(_translate("MainWindow", ">"))
        self.pushButton_5.setText(_translate("MainWindow", ">"))
        self.pushButton_6.setText(_translate("MainWindow", "<"))
        self.label.setText(_translate("MainWindow", "Face"))
        self.label_2.setText(_translate("MainWindow", "Hair"))
        self.label_3.setText(_translate("MainWindow", "Eyes"))
        self.pushButton_13.setText(_translate("MainWindow", "Save"))
        self.pushButton_14.setText(_translate("MainWindow", "<"))
        self.pushButton_15.setText(_translate("MainWindow", ">"))
        self.label_7.setText(_translate("MainWindow", "Ears"))
        self.pushButton_7.setText(_translate("MainWindow", "<"))
        self.pushButton_8.setText(_translate("MainWindow", "<"))
        self.pushButton_16.setText(_translate("MainWindow", "<"))
        self.pushButton_9.setText(_translate("MainWindow", ">"))
        self.pushButton_10.setText(_translate("MainWindow", ">"))
        self.label_4.setText(_translate("MainWindow", "Eyebrows"))
        self.label_5.setText(_translate("MainWindow", "Mouth"))
        self.pushButton_17.setText(_translate("MainWindow", ">"))
        self.pushButton_11.setText(_translate("MainWindow", "<"))
        self.label_6.setText(_translate("MainWindow", "Nose"))
        self.label_8.setText(_translate("MainWindow", "Attributes"))
        self.pushButton_12.setText(_translate("MainWindow", ">"))

    def resize(self, param, param1):
        pass

    def counting_face_plus(self):
        self.face_im_name_num += 1
        p_of_n = 1
        self.num_face = int(str(p_of_n) + str(self.face_im_name_num % 3 + 1))
        # print(self.num_face)
        # print(111)
        self.face_im_name = self.my_counter.definition(self.num_face)
        # print(self.face_im_name)
        print(self.face_im_name)

        # прописать return в переменную self_-_name_num
        # эта переменная становится аргументом при инициализации объекта Management

    def counting_face_minus(self):
        self.face_im_name_num -= 1
        p_of_n = 1
        self.num_face = int(str(p_of_n) + str(self.face_im_name_num % 3 + 1))
        self.face_im_name = self.my_counter.definition(self.num_face)
        print(self.face_im_name)

    def counting_hair_plus(self):
        p_of_n = 2
        self.hair_im_name_num += 1
        self.num_hair = int(str(p_of_n) + str(self.hair_im_name_num % 3 + 1))
        # self.face_im_name = self.my_counter.definition(self.num_face) докопировать эу строку в другие чести
        print(self.num_hair)

    def counting_hair_minus(self):
        p_of_n = 2
        self.hair_im_name_num -= 1
        self.num_hair = int(str(p_of_n) + str(self.hair_im_name_num % 3 + 1))
        print(self.num_hair)

    def counting_ears_plus(self):
        p_of_n = 3
        self.ears_im_name_num += 1
        self.num_ears = int(str(p_of_n) + str(self.ears_im_name_num % 3 + 1))
        print(self.num_ears)

    def counting_ears_minus(self):
        p_of_n = 3
        self.ears_im_name_num -= 1
        self.num_ears = int(str(p_of_n) + str(self.ears_im_name_num % 3 + 1))
        print(self.num_ears)

    def counting_eyes_plus(self):
        p_of_n = 4
        self.eyes_im_name_num += 1
        self.num_eyes = int(str(p_of_n) + str(self.eyes_im_name_num % 3 + 1))
        print(self.num_eyes)

    def counting_eyes_minus(self):
        p_of_n = 4
        self.eyes_im_name_num -= 1
        self.num_eyes = int(str(p_of_n) + str(self.eyes_im_name_num % 3 + 1))
        print(self.num_eyes)

    def counting_eyebrows_plus(self):
        p_of_n = 5
        self.eyebrows_im_name_num += 1
        self.num_eyebrows = int(str(p_of_n) + str(self.eyebrows_im_name_num % 3 + 1))
        print(self.num_eyebrows)

    def counting_eyebrows_minus(self):
        p_of_n = 5
        self.eyebrows_im_name_num -= 1
        self.num_eyebrows = int(str(p_of_n) + str(self.eyebrows_im_name_num % 3 + 1))
        print(self.num_eyebrows)

    def counting_mouth_plus(self):
        p_of_n = 6
        self.mouth_im_name_num += 1
        self.num_mouth = int(str(p_of_n) + str(self.mouth_im_name_num % 3 + 1))
        print(self.num_mouth)

    def counting_mouth_minus(self):
        p_of_n = 6
        self.mouth_im_name_num -= 1
        self.num_mouth = int(str(p_of_n) + str(self.mouth_im_name_num % 3 + 1))
        print(self.num_mouth)

    def counting_nose_plus(self):
        p_of_n = 7
        self.nose_im_name_num += 1
        self.num_nose = int(str(p_of_n) + str(self.nose_im_name_num % 3 + 1))
        print(self.num_nose)

    def counting_nose_minus(self):
        p_of_n = 7
        self.nose_im_name_num -= 1
        self.num_nose = int(str(p_of_n) + str(self.nose_im_name_num % 3 + 1))
        print(self.num_nose)

    def counting_attribute_plus(self):
        p_of_n = 8
        self.attribute_im_name_num += 1
        self.num_attribute = int(str(p_of_n) + str(self.attribute_im_name_num % 3 + 1))
        print(self.num_attribute)

    def counting_attribute_minus(self):
        p_of_n = 8
        self.attribute_im_name_num -= 1
        self.num_attribute = int(str(p_of_n) + str(self.attribute_im_name_num % 3 + 1))
        print(self.num_attribute)

    def saving(self):
        img = Image.new('RGB', (240, 320))
        rez_face = Image.open(f'imgs\sface1.jpg')
        rez_eyes = Image.open(f'imgs\eyes1.png')
        rez_ears = Image.open(f'imgs\ears1.png')
        rez_eyebrows = Image.open(f'imgs\eyebrows1.png')
        rez_mouth = Image.open(f'imgs\mouth1.png')
        rez_nose = Image.open(f'imgs\snose1.png')
        rez_hair = Image.open(f'imgs\hair1.png')
        rez_attribute = Image.open('imgs\sattribute1.png')
        img.paste(rez_face, (0, 0))
        img.paste(rez_eyes, (0, 0), rez_eyes)
        img.paste(rez_ears, (0, 0), rez_ears)
        img.paste(rez_eyebrows, (0, 0), rez_eyebrows)
        img.paste(rez_mouth, (0, 0), rez_mouth)
        img.paste(rez_nose, (0, 0), rez_nose)
        img.paste(rez_hair, (0, 0), rez_hair)
        img.paste(rez_attribute, (0, 0), rez_attribute)

        img.show()
        # прописать диалоговое окно для сохранения с вводом названия файла
        img.save("Durazkoe.jpg")

    def im(self):
        name2 = self.face_im_name
        pixmap = QPixmap(name2)
        self.mainlabel_face.setPixmap(pixmap)


    def setWindowIcon(self, param):
        pass


class Management:
    def definition(self, num):

        self.data = open('data.txt', encoding='utf-8')
        image_name = None
        for row in self.data:
            row_l = row.split('*')
            number = row_l[0]
            if int(number) == num:
                image_name = row_l[1]
        self.data.close()
        # print(image_name)
        return image_name

        # self.image_name = f'{name}, {num}'
        # con = sqlite3.connect('image_base.sqlite')
        # cur = con.cursor()
        #
        # result = cur.execute("""SELECT * FROM imgs_name WHERE id like '21' """).fetchall()
        # con.close()
        #
        # for elem in result:
        #     print(elem[0])

        # if num == 1:
        #     self.name += 1
        # elif num == 0:
        #     self.name -= 1
        # else:
        #     print('defin.error')
        # self.rez = (self.name % 3) + 1
        # на основе одного из чисел counter определяется замена / добавление изображения
        # здесь же должна подключаться база данных, чтобы из нее брать названия изображений
        # имя counter + значение числа counter = id изображения
        # print(f'{name},{self.rez}')
        #
        # return f'{name},{self.rez}'
        pass


if __name__ == "__main__":
    import sys

    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()

    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)

    MainWindow.show()
    sys.exit(app.exec_())
